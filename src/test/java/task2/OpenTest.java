package task2;

import com.codeborne.selenide.CollectionCondition;
import org.openqa.selenium.By;
import org.testng.Assert;
import org.testng.annotations.Test;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static com.codeborne.selenide.Selenide.*;

public class OpenTest {

    @Test(priority = 0)
    public void openBrowseAndSite(){
        open("https://www.google.com/ ");
        $(By.name("q")).val("Открытие").pressEnter();

    }

    @Test(priority = 1)
    public void existElement(){
        $(By.cssSelector("#rso > div:nth-child(1) > div > div > div.r > a > h3")).shouldBe();
        $(By.cssSelector("#rso > div:nth-child(1) > div > div > div.r > a > h3")).click();
    }

    @Test(priority = 2)
    public void equalsElementsUSD(){

        double buyRate = Double.parseDouble($(By.cssSelector("#main > div > div > div:nth-child(9) > section > div > div " +
                "> div:nth-child(1) > div > div > div > div > div.main-page-exchange__main " + "> table > tbody " +
                "> tr:nth-child(2) > td:nth-child(2) > div > span"))
                .getText().replace(",","."));

        double saleRate = Double.parseDouble($(By.cssSelector("#main > div > div > div:nth-child(9) > section > div > div" +
                " > div:nth-child(1) > div > div > div > div > div.main-page-exchange__main > table > tbody >" +
                " tr:nth-child(2) > td:nth-child(4) > div > span"))
                .getText().replace(",","."));


        assert (buyRate<saleRate);

        if (saleRate>buyRate) System.out.println("Correctly");
        else System.out.println("Incorrectly");


    }

    @Test(priority = 3)
    public void equalsElementsEUR(){

        double buyRate = Double.parseDouble($(By.cssSelector("#main > div > div > div:nth-child(9) > section > div >" +
                " div > div:nth-child(1) > div > div > div > div > div.main-page-exchange__main > table > tbody >" +
                " tr:nth-child(3) > td:nth-child(2) > div > span"))
                .getText().replace(",","."));

        double saleRate = Double.parseDouble($(By.cssSelector("#main > div > div > div:nth-child(9) > section >" +
                " div > div > div:nth-child(1) > div > div > div > div > div.main-page-exchange__main > table >" +
                " tbody > tr:nth-child(3) > td:nth-child(4) > div > span"))
                .getText().replace(",","."));

        assert (buyRate<saleRate);

        if (saleRate>buyRate) System.out.println("Correctly");
        else System.out.println("Incorrectly");


    }


}
